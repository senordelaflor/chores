<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <link rel="apple-touch-icon" href="/icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Chore Tracker</title>
  </head>
  <body class="bg-gray-50 h-screen w-screen overflow-hidden selection:bg-purple-100">
    <div id="app" data-controller="app" class="h-full w-full relative flex flex-col">

      <!-- Top Bar -->
      <header class="flex justify-between items-center p-6 bg-white/50 backdrop-blur-sm border-b border-gray-100 z-10">
        <div class="flex items-center gap-2">
          <h1 class="text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-500 bg-clip-text text-transparent">
            Chore Tracker
          </h1>
        </div>
        <button
          data-action="app#toggleSettings"
          class="p-2 rounded-full hover:bg-gray-100 transition-colors text-gray-600 hover:text-purple-600"
          aria-label="Settings">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
        </button>
      </header>

      <!-- Main Board -->
      <main
        data-app-target="board"
        data-controller="board"
        class="flex-1 overflow-x-auto overflow-y-hidden p-6 flex gap-6 snap-x snap-mandatory">
        <!-- User columns will be injected here -->
        <div class="hidden first:flex flex-col items-center justify-center w-full h-full text-gray-400">
          <p class="text-xl">No users yet. Tap settings to add someone!</p>
        </div>
      </main>

      <!-- Settings View (Overlay) -->
      <div
        data-app-target="settings"
        data-controller="settings"
        class="hidden absolute inset-0 bg-white z-20 flex flex-col transition-transform duration-300 transform translate-y-full">

        <header class="flex justify-between items-center p-6 border-b border-gray-100">
          <h2 class="text-2xl font-bold text-gray-800">Settings</h2>
          <button
            data-action="app#toggleSettings"
            class="p-2 rounded-full hover:bg-gray-100 text-gray-600">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </header>

        <div class="flex-1 overflow-y-auto w-full">
          <div class="max-w-3xl mx-auto p-6">
            <!-- User Management -->
            <section class="mb-12">
              <h3 class="text-lg font-semibold text-gray-700 mb-4">Users</h3>
              <div data-settings-target="userList" class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                <!-- User items -->
              </div>
              <form data-action="submit->settings#addUser" class="flex gap-2">
                <input type="text" name="name" placeholder="Name" required class="flex-1 px-4 py-2 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500">
                <button type="submit" class="bg-purple-600 text-white px-6 py-2 rounded-xl font-medium hover:bg-purple-700 transition-colors">Add</button>
              </form>
            </section>

            <!-- Chore Management -->
            <section>
              <h3 class="text-lg font-semibold text-gray-700 mb-4">Manage Chores</h3>
              <div class="bg-gray-50 p-6 rounded-3xl border border-gray-100">

                <!-- Chore List -->
                <div data-settings-target="globalChoreList" class="mb-6">
                  <!-- Global chores injected here -->
                </div>

                <!-- Add Chore Form -->
                <form data-settings-target="choreForm" data-action="submit->settings#addGlobalChore">
                  <!-- Form injected here -->
                </form>

              </div>
            </section>

            <!-- App Info -->
            <section class="mt-12 pb-6">
              <h3 class="text-lg font-semibold text-gray-700 mb-4">App Info</h3>
              <div class="bg-gray-50 p-6 rounded-3xl border border-gray-100">
                <button data-action="click->settings#reloadApp" class="w-full flex items-center justify-center gap-2 py-3 bg-white text-gray-600 hover:text-purple-600 hover:shadow-md rounded-xl transition-all font-medium border border-gray-200">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
                  </svg>
                  Update App
                </button>
                <p class="text-center text-xs text-gray-400 mt-4">Version 1.0.0</p>
              </div>
            </section>
          </div>
        </div>
      </div>

    </div>

    <!-- Claim Modal -->
    <div
      id="claim-modal"
      class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm opacity-0 transition-opacity duration-300"
      data-controller="claim-modal">
      <div class="bg-white rounded-3xl p-6 w-full max-w-sm transform scale-90 transition-transform duration-300 shadow-2xl">
        <h3 class="text-xl font-bold text-center text-gray-800 mb-6">Who did this chore?</h3>
        <div class="grid grid-cols-2 gap-4 mb-4" data-claim-modal-target="userList">
          <!-- Users injected here -->
        </div>
        <button data-action="click->claim-modal#close" class="w-full py-3 text-gray-500 font-medium hover:bg-gray-50 rounded-xl transition-colors">
          Cancel
        </button>
      </div>
    </div>

    <!-- Redeem Modal -->
    <div id="redeem-modal" data-controller="redeem-modal" class="fixed inset-0 z-50 hidden opacity-0 transition-opacity duration-300 backdrop-blur-sm" role="dialog" aria-modal="true">
      <div class="absolute inset-0 bg-black/50" data-action="click->redeem-modal#close"></div>
      <div class="absolute inset-0 flex items-center justify-center p-4">
        <div data-redeem-modal-target="modalCard" class="bg-white rounded-3xl shadow-2xl w-full max-w-sm p-6 transform scale-90 transition-transform duration-300 relative">
          <button data-action="click->redeem-modal#close" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>

          <div class="text-center mb-6">
          <h3 class="text-2xl font-bold text-gray-800 mb-1">Manage Screen Time</h3>
          <p class="text-gray-500">For <span data-redeem-modal-target="name" class="font-bold text-purple-600">User</span></p>

          <div class="mt-4 flex items-center justify-center gap-2 bg-gray-100 p-1 rounded-xl mb-4">
            <button data-action="click->redeem-modal#setMode" data-mode="redeem" data-redeem-modal-target="redeemTab" class="flex-1 px-4 py-2 rounded-lg text-sm font-bold transition-all bg-white text-red-600 shadow-sm">Redeem (-)</button>
            <button data-action="click->redeem-modal#setMode" data-mode="add" data-redeem-modal-target="addTab" class="flex-1 px-4 py-2 rounded-lg text-sm font-bold transition-all text-gray-500 hover:text-gray-700">Bonus (+)</button>
          </div>

          <div class="inline-block px-4 py-2 bg-blue-50 rounded-xl text-blue-600 font-bold text-xl">
            Balance: <span data-redeem-modal-target="balance">0m</span>
          </div>
        </div>

        <div class="grid grid-cols-3 gap-3">
          <button data-action="click->redeem-modal#updateTime" data-minutes="15" data-redeem-modal-target="actionButton" class="flex flex-col items-center justify-center p-4 rounded-2xl bg-gray-50 hover:bg-red-50 hover:text-red-600 hover:ring-2 hover:ring-red-200 transition-all group">
            <span class="text-2xl mb-1">ðŸ“±</span>
            <span class="font-bold">15m</span>
          </button>
          <button data-action="click->redeem-modal#updateTime" data-minutes="30" data-redeem-modal-target="actionButton" class="flex flex-col items-center justify-center p-4 rounded-2xl bg-gray-50 hover:bg-red-50 hover:text-red-600 hover:ring-2 hover:ring-red-200 transition-all group">
            <span class="text-2xl mb-1">ðŸ“±</span>
            <span class="font-bold">30m</span>
          </button>
          <button data-action="click->redeem-modal#updateTime" data-minutes="60" data-redeem-modal-target="actionButton" class="flex flex-col items-center justify-center p-4 rounded-2xl bg-gray-50 hover:bg-red-50 hover:text-red-600 hover:ring-2 hover:ring-red-200 transition-all group">
            <span class="text-2xl mb-1">ðŸ“±</span>
            <span class="font-bold">60m</span>
          </button>
        </div>
        </div>
      </div>
    </div>

    <!-- Edit User Modal -->
    <div id="edit-user-modal" data-controller="edit-user-modal" class="fixed inset-0 z-50 hidden opacity-0 transition-opacity backdrop-blur-sm duration-300" role="dialog" aria-modal="true">
      <div class="absolute inset-0 bg-black/50" data-action="click->edit-user-modal#close"></div>
      <div class="absolute inset-0 flex items-center justify-center p-4">
        <div data-edit-user-modal-target="modalCard" class="bg-white rounded-3xl shadow-2xl w-full max-w-sm p-6 transform scale-90 transition-transform duration-300 relative">
          <button data-action="click->edit-user-modal#close" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>

          <h3 class="text-xl font-bold text-center text-gray-800 mb-6">Edit User</h3>

          <form data-edit-user-modal-target="form" data-action="submit->edit-user-modal#save">
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-700 mb-2">Name</label>
              <input type="text" data-edit-user-modal-target="nameInput" required class="w-full px-4 py-2 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500">
            </div>

            <div class="mb-6">
              <label class="block text-sm font-medium text-gray-700 mb-2">Avatar</label>
              <div data-edit-user-modal-target="avatarContainer" class="flex flex-wrap gap-2 justify-center bg-gray-50 p-3 rounded-xl">
                <!-- Avatars injected here -->
              </div>
            </div>

            <button type="submit" class="w-full bg-purple-600 text-white py-3 rounded-xl font-bold hover:bg-purple-700 transition-colors shadow-lg shadow-purple-200">
              Save Changes
            </button>
          </form>
        </div>
      </div>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
